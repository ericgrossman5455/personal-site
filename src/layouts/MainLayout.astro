---
// component imports
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';
import GrainFilter from '../components/GrainFilter.astro';
import SplashScreen from '../components/SplashScreen.astro';

const { title = 'Lorem Ipsum', description = 'Lorem Ipsum', crumbs = [] } = Astro.props;
---

<!doctype html>
<html lang='en'>
	<head>
		<meta charset='UTF-8' />
		<meta name='viewport' content='width=device-width, initial-scale=1.0' />
		<link rel='stylesheet' type='text/css' href='/styles/global-reset.css' />
		<link rel='stylesheet' type='text/css' href='/styles/global-typography.css' />
		<link rel='stylesheet' type='text/css' href='/styles/global-utilities.css' />
		<link rel='stylesheet' type='text/css' href='/styles/global-animations.css' />
		<script src='https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js'></script>
		<link rel='apple-touch-icon' sizes='180x180' href='/favicons/apple-touch-icon.png' />
		<link rel='icon' type='image/png' sizes='32x32' href='/favicons/favicon-32x32.png' />
		<link rel='icon' type='image/png' sizes='16x16' href='/favicons/favicon-16x16.png' />
		<link rel='manifest' href='/favicons/site.webmanifest' />
		<link rel='mask-icon' href='/favicons/safari-pinned-tab.svg' color='#212024' />
		<link rel='shortcut icon' href='/favicons/favicon.ico' />
		<meta name='apple-mobile-web-app-title' content='Eric Grossman' />
		<meta name='application-name' content='Eric Grossman' />
		<meta name='msapplication-TileColor' content='#212024' />
		<meta name='msapplication-config' content='/favicons/browserconfig.xml' />
		<meta name='theme-color' media='(prefers-color-scheme: light)' content='#e3e3e3' />
		<meta name='theme-color' media='(prefers-color-scheme: dark)' content='#3c3c3c' />
		<meta name='color-scheme' content='light dark' />
		<meta name='generator' content={Astro.generator} />

		<meta name='author' content='Eric Grossman' />
		<meta name='description' content={description} />
		<title>{title}</title>
	</head>

	<body>
		<SplashScreen />
		<div class='primary-grid' id='primary-grid'>
			<Nav crumbs={crumbs} />
			<main>
				<slot>LOREM IPSUM</slot>
			</main>
			<Footer />
			<GrainFilter />
		</div>
	</body>
</html>

<style is:global lang='scss'>
	:root {
		--bg-layer-base: #e3e3e3;
		--glyph-standard: #4b4b4b;

		background-color: var(--bg-layer-base);
		color: var(--glyph-standard);
		-webkit-tap-highlight-color: rgba(0, 0, 0, 0);

		color-scheme: light dark;
		font-family: sans-serif;

		scroll-behavior: smooth;
		overflow-x: clip;

		@media (prefers-color-scheme: dark) {
			--bg-layer-base: #3c3c3c;
			--glyph-standard: #f3f3f3;

			background-color: var(--bg-layer-base);
			color: var(--glyph-standard);
		}
	}

	body {
		overflow-x: clip;
	}

	.primary-grid {
		display: grid;
		grid-template-columns: auto 1fr;
		grid-template-rows: 1fr auto;
		grid-template-areas:
			'nav main'
			'nav footer';
	}

	main {
		grid-area: &;
	}

	footer {
		grid-area: &;
	}

	main,
	footer {
		animation: fade-in-leftward ease-out var(--nav-anim-duration);
		transition: opacity var(--nav-anim-duration);

		@media only screen and (max-width: 600px) {
			&[aria-hidden='true'] {
				user-select: none;
				-webkit-user-select: none;
				opacity: 0.2;

				a,
				button {
					pointer-events: none;
				}
			}
		}
	}
</style>
